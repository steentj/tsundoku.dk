<section>
  <header class="section-header">
    <h1>Bibliotek</h1>
    <div class="view-toggle" role="group" aria-label="Skift visning">
      <button class="btn sm" data-view="cards" aria-pressed="false">Kort</button>
      <button class="btn sm" data-view="list" aria-pressed="false">Liste</button>
    </div>
  </header>

  <form id="filters" class="filters" role="search" aria-label="Filtrer bøger">
    <label>
      Titel
      <input type="search" id="qTitle" name="title" placeholder="Søg titel" autocomplete="off" />
    </label>
    <label>
      Forfatter
      <input type="search" id="qAuthor" name="author" placeholder="Søg forfatter" autocomplete="off" />
    </label>
    <label>
      Format
      <select id="qFormat" name="format">
        <option value="">Alle</option>
        <option value="physical">Fysisk</option>
        <option value="ebook">E-bog</option>
        <option value="audiobook">Lydbog</option>
      </select>
    </label>
    <label>
      Anskaffelse
      <select id="qAcq" name="acquisition">
        <option value="">Alle</option>
        <option value="new">Ny</option>
        <option value="used">Brugt</option>
        <option value="borrowed">Lånt</option>
      </select>
    </label>
    <label>
      Status
      <select id="qStatus" name="status">
        <option value="">Alle</option>
        <option value="not-started">Ikke startet</option>
        <option value="reading">I gang</option>
        <option value="finished">Færdig</option>
      </select>
    </label>
    <label>
      Sortér
      <select id="qSort" name="sort">
        <option value="title">Titel</option>
        <option value="author">Forfatter</option>
      </select>
    </label>
    <div class="spacer"></div>
    <output id="resultsCount" aria-live="polite"></output>
  </form>

  <div id="library" class="cards"></div>

  <dialog id="bookModal" aria-labelledby="bookTitle">
    <article>
      <header>
        <h2 id="bookTitle"></h2>
        <button class="btn ghost" data-modal-close aria-label="Luk">✕</button>
      </header>
      <div id="bookDetails"></div>
    </article>
  </dialog>

  <script id="books-data" type="application/json">{{ readFile "data/books.json" | safeHTML }}</script>
</section>